<!doctype html>
<html>
  <head>
    <title>LazyLoad Test</title>
    <style type="text/css">
      #log { font: 10pt Consolas, Monaco, fixed; width: 100%; }
    </style>
  </head>
  <body>
    <h1>LazyLoad Test</h1>

    <form action="" method="get">
      <p>
        <input type="button" id="btnLoad" value="Load JS (sequential calls)" />
        <input type="button" id="btnLoadSingle" value="Load JS (single call)" />
      </p>

      <p>
        <textarea id="log" rows="20" cols="50"></textarea>
      </p>
    </form>

    <script src="../lazyload.js"></script>
    <script type="text/javascript">
      var btnLoad           = document.getElementById('btnLoad'),
          btnLoadSingle     = document.getElementById('btnLoadSingle'),
          logEl             = document.getElementById('log'),
          scripts           = [
            'http://pieisgood.org/test/lazyload/script.php?num=1',
            'http://pieisgood.org/test/lazyload/script.php?num=2',
            'http://pieisgood.org/test/lazyload/script.php?num=3',
            'http://pieisgood.org/test/lazyload/script.php?num=4',
            'http://pieisgood.org/test/lazyload/script.php?num=5'
          ];

      function loadComplete(scripts) {
        log('callback');
      }
      
      function log(message) {
        logEl.value += "[" + (new Date()).toTimeString() + "] " + message + "\r\n";
      }

      btnLoad.onclick = function () {
        log('loading (sequential calls)');

        for (var i = 0; i < scripts.length; i += 1) {
          LazyLoad.js(scripts[i], loadComplete, scripts[i]);
        }
      }

      btnLoadSingle.onclick = function () {
        log('loading (single call)');

        LazyLoad.js(scripts, loadComplete, scripts);
      }
    </script>
  </body>
</html>
